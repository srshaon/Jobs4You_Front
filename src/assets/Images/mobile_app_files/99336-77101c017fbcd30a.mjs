(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[99336],{631739:(e,t,i)=>{i.d(t,{Z:()=>n});const n={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_AUTOPLAY_LOCAL_STORAGE_KEY:"_video_autoplay_state",VIDEO_IFRAME_ID:"video-iframe"}},730762:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(631739),r=i(241933),o=i(399024),s=i(928940),a=i(388279),d=i(80336),u=i(332205);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c=(0,u.ZP)();let p=null;class _{static getInstance(){return p||(p=new _),p}constructor(){l(this,"_logTimeoutLong",null),l(this,"_logTimeoutShort",null),l(this,"_moduleViewElements",{}),l(this,"_scrollListeners",{}),l(this,"_clickthroughStartEvent",null),l(this,"_utcDate",new Date);const e=(e,t)=>{const{activeElement:i}=document;i&&i.id===n.Z.VIDEO_IFRAME_ID&&i?setTimeout((()=>i.blur()),0):(r.Z.pause(d.LU),this.flushEvents(e,void 0))},t=(e=>{let t=!1;return(...i)=>{t||(t=!0,e(...i))}})((t=>e(!0)));window.addEventListener("beforeunload",t),window.addEventListener("pagehide",t),window.addEventListener("focus",(()=>{r.Z.resume(d.LU)})),window.addEventListener("blur",(t=>e(!1)))}_handleDatelineCrossover(){const e=new Date;this._utcDate.getUTCDate()!==e.getUTCDate()&&(this._utcDate=e,(0,o.Z)())}setTimeoutToFlushEvents(e){const t=e.event_type;if(_.EVENTS_FAST_FLUSH.includes(e.view_type)&&!this._logTimeoutShort&&13===t)this._logTimeoutShort=s.Z.setTimeout(this.flushEvents.bind(this,!1,!0),_.FLUSH_INTERVAL_SHORT);else if(!this._logTimeoutLong){const e=_.FLUSH_INTERVAL_LONG;this._logTimeoutLong=s.Z.setTimeout(this.flushEvents.bind(this),e)}}addEvent(e){const t=e.event_type;if(null==t)return;if(!(0,u.cA)(e))return;this.setTimeoutToFlushEvents(e);const i=(0,u.li)(e),n=u.Ch[t];n?(0,u.nc)(i,n).forEach(c.logImpression):(c.logContextEvent(i),this._handleDatelineCrossover(),12===t&&(c.logContextEvent({...i,event_type:7946}),this._clickthroughStartEvent=i,a.Z.storeClickthroughProperties({view_type:i.view_type,view_parameter:i.view_parameter,component:i.component,element:i.element,object_id_str:i.object_id_str,view_data:i.view_data,aux_data:i.aux_data,clientTrackingParams:i.clientTrackingParams})))}addViewToContext(e){(0,u.HX)(e)}getPreviousViewFromContext(){return(0,u.Hb)()}getViewFromContext(){return(0,u.cv)()}flushEvents(e,t){var i;const n=null===(i=c.getContextEvents)||void 0===i?void 0:i.call(c);n&&!n.length||(this._handleDatelineCrossover(),c.flushContextEvents(e),t?this._resetShortTimerEvents():this._reset())}_reset(){this._resetShortTimerEvents(),this._resetLongTimerEvents()}_resetShortTimerEvents(){var e;null===(e=c.resetEventsBuffer)||void 0===e||e.call(c),clearTimeout(this._logTimeoutShort),this._logTimeoutShort=null}_resetLongTimerEvents(){var e;null===(e=c.resetEventsBuffer)||void 0===e||e.call(c),clearTimeout(this._logTimeoutLong),this._logTimeoutLong=null}logPlainObject(e){"event_type"in e&&this.addEvent({...e,..."aux_data"in e?{aux_data:{...e.aux_data}}:null})}}l(_,"FLUSH_INTERVAL_LONG",1e4),l(_,"FLUSH_INTERVAL_SHORT",300),l(_,"EVENTS_FAST_FLUSH",[9,3]),window.addEventListener&&window.addEventListener("focus",(()=>{const e=_.getInstance();if(e._clickthroughStartEvent){const t=e._clickthroughStartEvent;e._clickthroughStartEvent=null;const i={...t,event_type:4100,duration_ns:(0,u.h1)()-t.time};e.addEvent(i)}}));const h=_},388279:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(730762),r=i(439887),o=i(185062),s=i(584489),a=i(815962);const d={},u=(0,o.Z)()&&(0,o.Z)().debug_timespent,l=(0,a.Z)({flushEvents:e=>{n.Z.getInstance().flushEvents(e,void 0)},shouldShowLogStatements:u,track:e=>{const t=n.Z.getInstance(),i=s.Z.instance.getState();let o;if(i.pins&&e){const{pair_id:t,event_type:n}=e;if(4703===n&&t&&d[t])e.clientTrackingParams=d[t];else{var a;const s=e.object_id_str,u=s?i.pins[s]:null,l=null===(a=i.history.current)||void 0===a?void 0:a.location,c=i.history.previous;u&&l&&(o=(0,r.Z)(u,l,c)||`${u.tracking_params||""}~0`,e.clientTrackingParams=o,4702===n&&t&&(d[t]=o))}}t.addEvent(e)}})},928940:(e,t,i)=>{let n;i.d(t,{Z:()=>o}),void 0===n&&(n=i.g);const r=function(e,t){const i=(r=t)===n.setTimeout?function(e,t){return n.setTimeout(e,t)}:r===n.setInterval?function(e,t){return n.setInterval(e,t)}:r===n.clearTimeout?function(e){return n.clearTimeout(e)}:r===n.clearInterval?function(e){return n.clearInterval(e)}:r;var r;return function(e,t,n,...r){return i(e,t,n,...r)}},o={setTimeout:r(0,n.setTimeout),setInterval:r(0,n.setInterval),clearTimeout:r(0,n.clearTimeout),clearInterval:r(0,n.clearInterval)}},815962:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(731164),r=i(932747);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const s="ACTIVE",a="PAUSED",d=()=>window&&window.performance&&window.performance.now?`(Time: ${(window.performance.now()/1e3).toFixed(3)}s)`:"",u=({flushEvents:e,shouldShowLogStatements:t=!1,track:i})=>{const u=new Map,l=t?console:{error:(...e)=>{},log:(...e)=>{},group:(...e)=>{},groupEnd:(...e)=>{}};console.group||(l.group=(...e)=>console.log(...e),l.groupEnd=(...e)=>{});return new class{constructor(){o(this,"appTimedPair",null),o(this,"clickthroughProperties",null),o(this,"offsiteTimedPair",null),o(this,"offsiteTimedPairForegroundId",null),o(this,"addEventListeners",(()=>{let e,t;"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");const i=t=>{document[e]?this.unregisterApp(!1,void 0,t):document.hasFocus()&&this.registerApp()};t&&document.addEventListener(t,i,!1),window.addEventListener("focus",this.registerApp),window.addEventListener("blur",(e=>this.unregisterApp(!1,void 0,e)));const r=(e=>{let t=!1;return(...i)=>{t||(t=!0,e(...i))}})((e=>this.unregisterApp(!0,void 0,e)));window.addEventListener("beforeunload",r),window.addEventListener("pagehide",r);const o=navigator&&navigator.userAgent.toLowerCase();o&&o.includes("macintosh")&&o.includes("chrome")&&window.addEventListener("popstate",(t=>{document.hasFocus()||document[e]||n.Z.increment("chrome_mac_back_forward_button",1)}))})),o(this,"storeClickthroughProperties",(e=>{this.clickthroughProperties&&n.Z.increment("webapp.metrics.clickthroughs.overwritten",1,{previousView:this.clickthroughProperties.view_type,previousViewParameter:this.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}),this.clickthroughProperties=e})),o(this,"clearClickthroughProperties",(()=>{this.clickthroughProperties=null,this.offsiteTimedPair=null,this.offsiteTimedPairForegroundId=null})),o(this,"registerApp",(()=>{l.group("App Foreground",d()),null==this.appTimedPair?(this.appTimedPair=new r.Z,this.appTimedPair.start(),this._unpauseAllComponents(),this._endOffsiteTimedPair(),null!==this.appTimedPair&&void 0!==this.appTimedPair&&i({event_type:4700,pair_id:this.appTimedPair.uuid})):l.error("TimedPair already exists for app."),l.groupEnd()})),o(this,"unregisterApp",((t=!1,n=!1,r)=>{l.group("App Background",d());const o=this.appTimedPair;if(null!=o){this._pauseAllComponents();const e=o.end();this._startOffsiteTimedPair(),i({event_type:4701,duration_ns:e,pair_id:o.uuid}),this.appTimedPair=null}else l.error("No TimedPair found for app.");const s=["beforeunload","pagehide"],a=s.includes(null==r?void 0:r.type),u=s.includes(null==r?void 0:r.pauseReason);(a||u)&&this._endOffsiteTimedPair(),n||e(null!=t&&t,void 0,r),l.groupEnd()})),o(this,"_activateComponent",(e=>{l.group("Activating component",d()),t&&l.log(e.getContext());const n=e.getTimedPair();if(n){n.start();const{view:t,viewParameter:r,component:o,element:s,objectId:a,clientTrackingParams:d}=e.getLoggerContext();i({event_type:4702,view_type:t,view_parameter:r,component:o,element:s,object_id_str:a,view_data:e.props.viewData,pair_id:n.uuid,clientTrackingParams:d,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId(),...e.props.auxData}})}l.groupEnd()})),o(this,"_deactivateComponent",(e=>{l.group("Deactivating component",d()),t&&l.log(e.getContext());const n=e.getTimedPair();if(n){const{view:t,viewParameter:r,component:o,element:s,objectId:a,clientTrackingParams:d}=n,u=n.end();i({event_type:4703,view_type:t,view_parameter:r,component:o,element:s,object_id_str:a,view_data:e.props.viewData,duration_ns:u,pair_id:n.uuid,clientTrackingParams:d,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId(),...e.props.auxData}})}l.groupEnd()})),o(this,"_startOffsiteTimedPair",(()=>{const{clickthroughProperties:e}=this;e&&(this.offsiteTimedPair=new r.Z({...e,view:186,viewParameter:e.view_parameter,objectId:e.object_id_str}),this.offsiteTimedPair.start(),this.offsiteTimedPairForegroundId=this.appTimedPair?this.appTimedPair.uuid:null,i({...e,event_type:4702,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...e.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId}}))})),o(this,"_endOffsiteTimedPair",(()=>{const{offsiteTimedPair:e,clickthroughProperties:t}=this;if(e&&t){const n=e.end();i({...t,event_type:4703,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...t.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId},duration_ns:n}),this.clearClickthroughProperties()}})),o(this,"_pauseAllComponents",(()=>{l.group("Pause all components"),u.forEach(((e,t,i)=>{e===s&&this._deactivateComponent(t),i.set(t,a)})),l.groupEnd()})),o(this,"_unpauseAllComponents",(()=>{l.group("Unpause all components"),u.forEach(((e,t)=>{t.setTimedPair(new r.Z(t.getLoggerContext()))})),u.forEach(((e,t)=>{u.set(t,s),this._activateComponent(t)})),l.groupEnd()}))}registerComponent(e){null===this.appTimedPair?u.set(e,a):(u.set(e,s),this._activateComponent(e))}unregisterComponent(e){u.get(e)===s&&(this._deactivateComponent(e),e.setTimedPair(new r.Z(e.getLoggerContext()))),u.delete(e)}size(){return u.size}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/99336-77101c017fbcd30a.mjs.map